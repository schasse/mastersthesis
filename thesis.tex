\documentclass[11pt]{report}

\usepackage[
a4paper,
total={129.78mm,210mm},
vcentering
]{geometry}

\usepackage[T1]{fontenc} % ä, ö, etc. in output
\usepackage[utf8]{inputenc} % UTF8 as input
\usepackage{xltxtra} % xelatex: ä, ö, etc. in output
\usepackage{fontspec}
\usepackage{titlesec}

\setsansfont{SourceCodePro-Bold}[
  Path=fonts/SourceCodePro/,
  BoldFont=SourceCodePro-Black
]
% Rokkit, ZillaSlab, Spectral
\setromanfont{Spectral-Regular}[
  Path=fonts/Spectral/,
  BoldFont=Spectral-Bold,
  ItalicFont=Spectral-Italic,
  BoldItalicFont=Spectral-BoldItalic
]
\setmonofont{SourceCodePro-Medium}[Path=fonts/SourceCodePro/]

\titleformat{\chapter}[block]
{
  \filcenter\large
  \addtolength{\titlewidth}{2pc}%
  \titleline*[c]{\titlerule*[.6pc]{\tiny\textbullet}}%
  \addvspace{6pt}%
  \LARGE\sffamily
}
{\thechapter}{1em}{\uppercase}

\titleformat{\section}[hang]
{\sffamily\large}
{\thesection}
{1pc}
{}

\titleformat{\subsection}[hang]
{\sffamily\normalsize}
{\thesubsection}
{1pc}
{}

% Times New Roman
% \setromanfont[
% % BoldFont=Source Sans Pro Semibold,
% % ItalicFont=Source Sans Pro Semibold,
% % BoldItalicFont=Source Sans Pro Semibold,
% ]{Source Sans Pro}
% Arial
% \setsansfont[
% BoldFont=arialbd.ttf,
% ItalicFont=ariali.ttf,
% BoldItalicFont=arialbi.ttf
% ]{arial.ttf}
% % Courier New
% \setmonofont[Scale=0.90,
% BoldFont=courbd.ttf,
% ItalicFont=couri.ttf,
% BoldItalicFont=courbi.ttf,
% Color={0019D4}
% ]{cour.ttf}

% \usepackage{showframe}

% TODO
% * geometry
% * fonts and colors (xelatex) \usepackage{lib/w-bookps}
% * chapter/headings layout
% * hyperrefs
% * draft version (with date as watermark?)
% * title page
% * table of contents (pagenumering in roman? add list of figures? bibliography?)
% * other special pages such as acknowledgement, dedication, copyright, bibliography etc.

\usepackage{graphicx}
\graphicspath{{./figures/}}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}

\usepackage[style=numeric,backend=bibtex8]{biblatex}
\bibliography{./pieces/thesis}

\begin{document}

\include{pieces/title}
% \include{pieces/copyright}
% \include{pieces/dedication}
% \include{pieces/abstract}

\tableofcontents

\include{pieces/main}

\printbibheading
\printbibliography[keyword={background},title={Background},heading=subbibliography]
\printbibliography[keyword={technologies,title={Software},heading=subbibliography}]
\printbibliography[keyword={related},title={Related Work},heading=subbibliography]

\end{document}
